#getdata

library(twitteR)
library(base64enc)
c.key<- "bLUW2i6ND03K9F8BiJrRKTua0"
c.sec<-"a03b84qRL68S7E7m16ynhSXP53GhgHg15sL56IKT5fq5R79kNu"
a.tok<-"202869942-cBVThh8r86jr1By31PYnAp77S7BPHXuPfNEiVeiJ"
a.sec<-"lahTRYwkbQpG1o3dBHTL6i3yAiUpsrTDilchqQqCvPR5H"
setup_twitter_oauth(consumer_key=c.key, consumer_secret=c.sec, access_token=a.tok, access_secret=a.sec)
rstats<-searchTwitter("#FeriaNacPop", n=9999, since="2018-06-01")
feria.libro<- do.call("rbind", lapply(rstats, as.data.frame))

#corpus
feria.libro_text<- sapply(rstats, function (x) x$getText())
str(feria.libro_text)
install.packages("tm")
library(tm)
feria_corpus<- Corpus (VectorSource(feria.libro_text))
feria_corpus
inspect(feria_corpus[1])

#limpieza
feria_clean<- tm_map(feria.libro_text, removePunctuation)
removeSpecialChars <- function(x) gsub("[^a-zA-Z0-9 ]","",x)
feria_clean <- tm_map(feria_clean, removeSpecialChars)
feria_clean<- tm_map(feria_clean, content_transformer(tolower))
feria_clean <- tm_map(feria_clean, removeNumbers)
feria_clean <- tm_map(feria_clean, removeWords, stopwords("spanish"))
feria_clean <- tm_map(feria_clean, stripWhitespace)

install.packages("wordcloud")
library(wordcloud)
wordcloud(feria_clean)
